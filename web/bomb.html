<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Countdown Blast (Simulation)</title>
  <style>
    :root{
      --bg:#0f1724;
      --panel:#0b1220;
      --accent:#ff6b6b;
      --accent-2:#ffd166;
      --text:#e6eef8;
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,var(--bg),#071022);color:var(--text);display:flex;align-items:center;justify-content:center}
    .card{
      width:420px;
      padding:24px;
      border-radius:14px;
      background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.006));
      box-shadow:0 10px 30px rgba(2,6,23,0.6);
      text-align:center;
    }
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:6px 0 18px;color:#9fb0c8;font-size:14px}
    .controls{display:flex;gap:8px;justify-content:center;margin-bottom:12px}
    input[type=number]{
      width:120px;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);
      background:rgba(255,255,255,0.02);color:var(--text);font-size:16px;text-align:center;
    }
    button{
      padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#ff8f8f);color:white;font-weight:600;cursor:pointer;
      box-shadow:0 6px 18px rgba(255,107,107,0.16);
    }
    button.secondary{
      background:linear-gradient(90deg,#2b394e,#1b2633);
      box-shadow:none;color:#9fb0c8;border:1px solid rgba(255,255,255,0.03)
    }
    .countdown{
      font-size:56px;font-weight:700;margin:6px 0 10px;letter-spacing:2px;
      font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
    }
    .status{color:#a7bed8;font-size:13px;margin-bottom:8px}
    .ring-wrap{display:flex;justify-content:center;margin-bottom:12px}
    .ring{
      width:180px;height:180px;border-radius:50%;display:grid;place-items:center;
      background:conic-gradient(var(--accent) 0deg, rgba(255,255,255,0.04) 0deg);
      box-shadow:inset 0 6px 24px rgba(255,255,255,0.02), 0 10px 24px rgba(1,9,20,0.6);
    }
    /* canvas explosion covers card */
    #explosionCanvas{
      position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;mix-blend-mode:screen;
    }
    .footer{font-size:12px;color:#88a3bf;margin-top:8px}
    /* small sparkle when exploded */
    .blast-text{
      font-size:20px;color:var(--accent-2);font-weight:700;text-shadow:0 6px 20px rgba(255,209,102,0.12);
    }
  </style>
</head>
<body>
  <div class="card" role="application" aria-labelledby="title">
    <h1 id="title">Countdown Blast (Simulation)</h1>
    <p class="lead">Enter seconds, press Start. This is a **visual simulation only** — no real-world instructions.</p>

    <div class="controls" aria-hidden="false">
      <input id="secondsInput" type="number" min="1" value="10" aria-label="Seconds to countdown"/>
      <button id="startBtn">Start</button>
      <button id="cancelBtn" class="secondary">Cancel</button>
    </div>

    <div class="ring-wrap">
      <div class="ring" id="ring">
        <div>
          <div class="countdown" id="countdown">10</div>
          <div class="status" id="status">Idle</div>
        </div>
      </div>
    </div>5

    <div class="footer">Simulation for UI/animation practice • Press Cancel to stop</div>
  </div>

  <canvas id="explosionCanvas" aria-hidden="true"></canvas>

  <script>
  /**
   * Purely visual countdown + explosion simulation.
   * No real-world instructions. Safe to use locally.
   */

  // Elements
  const input = document.getElementById('secondsInput');
  const startBtn = document.getElementById('startBtn');
  const cancelBtn = document.getElementById('cancelBtn');
  const countdownEl = document.getElementById('countdown');
  const statusEl = document.getElementById('status');
  const ring = document.getElementById('ring');
  const canvas = document.getElementById('explosionCanvas');
  const ctx = canvas.getContext('2d');

  // Canvas sizing
  function resizeCanvas(){
    canvas.width = innerWidth * devicePixelRatio;
    canvas.height = innerHeight * devicePixelRat5io;
    ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
  }
  addEventListener('resize', resizeCanvas);
  resizeCanvas();

  let totalSeconds = 10;
  let remaining = 10;
  let intervalId = null;
  let running = false;

  function updateRing(){
    const pct = Math.max(0, remaining / totalSeconds);
    const deg = pct * 360;
    ring.style.background = `conic-gradient(var(--accent) ${deg}deg, rgba(255,255,255,0.04) ${deg}deg)`;
    countdownEl.textContent = Math.ceil(remaining);
  }

  function startCountdown(seconds){
    if (running) return;
    totalSeconds = Math.max(1, Math.floor(seconds));
    remaining = totalSeconds;
    running = true;
    statusEl.textContent = 'Counting down...';
    updateRing();

    // tick every 100ms for smooth ring reduction
    const startTime = performance.now();
    intervalId = setInterval(() => {
      const elapsed = (performance.now() - startTime) / 1000;
      remaining = Math.max(0, totalSeconds - elapsed);
      updateRing();

      if (remaining <= 0){
        clearInterval(intervalId);
        running = false;
        triggerExplosion();
      }
    }, 100);
  }

  function cancelCountdown(){
    if(intervalId) clearInterval(intervalId);
    running = false;
    statusEl.textContent = 'Canceled';
    // reset ring style
    ring.style.background = `conic-gradient(var(--accent) 360deg, rgba(255,255,255,0.04) 360deg)`;
    countdownEl.textContent = input.value || totalSeconds;
  }

  startBtn.addEventListener('click', () => {
    const s = Number(input.value) || 10;
    startCountdown(s);
  });
  cancelBtn.addEventListener('click', cancelCountdown);

  // --- Explosion animation on canvas (particles) ---
  const particles = [];
  let animating = false;

  function random(min,max){ return Math.random()*(max-min)+min; }

  function spawnExplosion(x = innerWidth/2, y = innerHeight/2){
    // spawn many particles in layers for colorful effect
    const colors = ['#ff6b6b','#ffd166','#ff9f1c','#ff4d6d','#ffd1a9'];
    for(let i=0;i<160;i++){
      const angle = Math.random()*Math.PI*2;
      const speed = random(2,12) * (0.6 + Math.random());
      const size = random(2,7);
      const life = random(600,1600); // ms
      const color = colors[Math.floor(Math.random()*colors.length)];
      particles.push({
        x, y, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed,
        size, life, born: performance.now(), color, alpha:1
      });
    }
    // flash
    flashScreen();
    // small textual effect in the ring
    showBlastText();
    if(!animating) requestAnimationFrame(animate);
  }

  function flashScreen(){
    // a brief full-screen white flash with fade
    const flash = document.createElement('div');
    flash.style.position = 'fixed';
    flash.style.left = '0'; flash.style.top = '0';
    flash.style.width = '100%'; flash.style.height = '100%';
    flash.style.background = 'radial-gradient(circle at center, rgba(255,255,255,0.9), rgba(255,255,255,0.4))';
    flash.style.pointerEvents = 'none';
    flash.style.mixBlendMode = 'screen';
    flash.style.opacity = '0.9';
    flash.style.transition = 'opacity 700ms ease-out';
    document.body.appendChild(flash);
    setTimeout(()=> flash.style.opacity = '0', 40);
    setTimeout(()=> flash.remove(), 800);
  }

  function showBlastText(){
    const prev = document.querySelector('.blast-text');
    if(prev) prev.remove();
    const t = document.createElement('div');
    t.className = 'blast-text';
    t.style.position = 'absolute';
    t.style.left = '50%';
    t.style.top = '38%';
    t.style.transform = 'translateX(-50%)';
    t.textContent = 'BOOM!';
    t.style.opacity = '0';
    t.style.transition = 'transform 700ms cubic-bezier(.2,.9,.3,1), opacity 700ms';
    document.querySelector('.card').appendChild(t);
    requestAnimationFrame(()=> {
      t.style.transform = 'translateX(-50%) translateY(-6px) scale(1.05)';
      t.style.opacity = '1';
      setTimeout(()=> { t.style.opacity='0'; t.style.transform='translateX(-50%) translateY(-20px) scale(0.95)'; }, 800);
      setTimeout(()=> t.remove(), 1400);
    });
  }

  function animate(){
    animating = true;
    const now = performance.now();
    // clear canvas
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // update and draw particles
    for(let i = particles.length - 1; i >= 0; i--){
      const p = particles[i];
      const t = now - p.born;
      if(t > p.life){
        particles.splice(i,1);
        continue;
      }
      // simple gravity and drag
      p.vy += 0.06; // gravity
      p.vx *= 0.998;
      p.vy *= 0.998;
      p.x += p.vx;
      p.y += p.vy;
      p.alpha = 1 - (t / p.life);
      // draw
      ctx.beginPath();
      ctx.fillStyle = hexToRgba(p.color, p.alpha);
      ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
      ctx.fill();
    }

    // small fading smoke rings
    // (draw a few translucent circles centered near center)
    const smokeAlpha = Math.max(0, 0.6 - (particles.length/300));
    if(smokeAlpha > 0.02){
      ctx.beginPath();
      ctx.fillStyle = `rgba(30,40,60,${smokeAlpha*0.12})`;
      ctx.arc(innerWidth/2, innerHeight/2+10, 60 + (160 - particles.length)*0.18, 0, Math.PI*2);
      ctx.fill();
    }

    if(particles.length > 0) requestAnimationFrame(animate);
    else {
      animating = false;
      // small cleanup
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }
  }

  function hexToRgba(hex, a){
    // expect #rrggbb
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    return `rgba(${r},${g},${b},${a})`;
  }

  function triggerExplosion(){
    statusEl.textContent = 'Explosion!';
    // animate ring quickly to full
    ring.style.background = `conic-gradient(var(--accent-2) 360deg, rgba(255,255,255,0.04) 360deg)`;
    // pick center of card for explosion
    const rect = document.querySelector('.card').getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    spawnExplosion(cx, cy);
    // after a while, return to idle state
    setTimeout(()=> {
      statusEl.textContent = 'Idle';
      countdownEl.textContent = input.value || totalSeconds;
      ring.style.background = `conic-gradient(var(--accent) 360deg, rgba(255,255,255,0.04) 360deg)`;
    }, 1600);
  }

  // Prettify keyboard start (Enter)
  input.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter') startBtn.click();
  });

  // Initialize display
  countdownEl.textContent = input.value;
  ring.style.background = `conic-gradient(var(--accent) 360deg, rgba(255,255,255,0.04) 360deg)`;
  statusEl.textContent = 'Idle';

  // For demo/start: optional auto-start (commented out)
  // startCountdown(5);

  // Accessibility: if user navigates away, cancel countdown
  document.addEventListener('visibilitychange', () => {
    if(document.hidden) cancelCountdown();
  });

  </script>
</body>
</html>
